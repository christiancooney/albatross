<div class="container destinations">
  <br>
    <% if current_user %>
 <%= link_to new_article_path, style: "text-decoration: none;" do %>
      <button class="btn btn-light">New article</button>
      <% end %>
      <br>
<% end %>
  <h1 class="grand-title" style="text-align: center;">TRAVEL</h1>
  <hr>

  <div class="accordion" id="accordionExample">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          <h4>COUNTRIES &nbsp;</h4>
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          <div class="destination-tabs">
            <% @countries.each do |country| %>
            <div class="destination-entry">
              <a class=" dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
              <%= country.name %></a>
              <ul class="dropdown-menu locations-dropper" >
              <%  country.locations.each do |location| %>
                <li class="dropdown-item location-list" ><%= link_to location.name, location_path(location), :method => "get"  %></li>
              <% end %>
                <hr>
              <li class="dropdown-item location-list" ><%= link_to "View all posts", country_path(country), :method => "get"  %></li>
            </ul>
          </div>
          <% end %>
        </div>
        </div>
      </div>
    </div>
  </div>
  <hr>

  <div class="search-bar-travel dropup">
    <a class="dropdown-toggle dropup" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="fas fa-search"></i>
    </a>
      <ul class="dropdown-menu up-drop" >


        <li class="dropdown-item location-list" >  <%= simple_form_for :search, url: travel_path, method: :get, data: {turbo_frame: "destination"} do |f| %>
          <input class="form-control string required" type="text" name="search[query]" id="search_query" placeholder="Search cities, etc..."></li>
        <% end %>
      </ul>
    <div class="ml-auto small-screen-menu-travel">
      <a class=" dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">Filters</a>
        <ul class="dropdown-menu" >
          <li class="dropdown-item location-list" ><%=link_to "Travel", travel_path(filter: "Travel"), class: "button-16", id: "#{"selected" if params[:filter] == "Travel"}" %></li>
          <li class="dropdown-item location-list" ><%=link_to "City Breaks", travel_path(filter: "City Breaks"), class: "button-16", id: "#{"selected" if params[:filter] == "City Breaks"}" %></li>
          <li class="dropdown-item location-list" ><%=link_to "Beach", travel_path(filter: "Beach"), class: "button-16", id: "#{"selected" if params[:filter] == "Beach"}" %></li>
          <li class="dropdown-item location-list" ><%=link_to "Active", travel_path(filter: "Active"), class: "button-16", id: "#{"selected" if params[:filter] == "Active"}" %></li>
          <li class="dropdown-item location-list" ><%=link_to "Restaurants", travel_path(filter: "Restaurant"), class: "button-16", id: "#{"selected" if params[:filter] == "Restaurant"}" %></li>
          <li class="dropdown-item location-list" ><%=link_to "Bars", travel_path(filter: "Bars"), class: "button-16", id: "#{"selected" if params[:filter] == "Bars"}" %></li>
          <hr>
          <li class="dropdown-item location-list" ><%=link_to "Reset filters", travel_path, class: "button-16" %></li>
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-auto filters-panel" data-controller="filter">
        <div class="search-and-filters">
          <div class="filter-buttons-travel large-screen-menu">
            <br>
            <h6>Filters</h6>
            <hr>
           <ul>
              <li> <%=link_to "Travel", travel_path(filter: "Travel"), class: "button-16", id: "#{"selected" if params[:filter] == "Travel"}" %></li>
              <li> <%=link_to "City Breaks", travel_path(filter: "City Breaks"), class: "button-16", id: "#{"selected" if params[:filter] == "City Breaks"}" %></li>
              <li> <%=link_to "Beach", travel_path(filter: "Beach"), class: "button-16", id: "#{"selected" if params[:filter] == "Beach"}" %></li>
              <li> <%=link_to "Active", travel_path(filter: "Active"), class: "button-16", id: "#{"selected" if params[:filter] == "Active"}" %></li>
              <li> <%=link_to "Restaurants", travel_path(filter: "Restaurant"), class: "button-16", id: "#{"selected" if params[:filter] == "Restaurant"}" %></li>
              <li> <%=link_to "Bars", travel_path(filter: "Bars"), class: "button-16", id: "#{"selected" if params[:filter] == "Bars"}" %></li>
              <hr>
              <li> <%=link_to "Reset filters", travel_path, class: "button-16" %></li>
            </ul>
         </div>
       </div>
      </div>

      <div class="col">
       <div id="travel-render">
        <%= render partial: 'destination'%>

        <% if @articles.empty? %>
          <h2 style="margin: 10% auto;width:-moz-fit-content;width:fit-content;">No posts fit your search. Please try again</h2>
          <h4 style="margin: 10% auto;width:-moz-fit-content;width:fit-content;">   <%=link_to "Reset filters", travel_path, class: "button-16" %></h4>
        <% end %>
      </div>
    </div>

  </div>
  <br>
</div>
